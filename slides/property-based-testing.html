<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Property Based Testing - Introduction</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <textarea id="source">

class: center, inverse, middle

#Property Based Testing

---

class: center, middle

#Agenda

## A trivial example
## Real-world cases
## Exercise

---

# A trivial example : testing `add` function

```
assertEquals(4, add(2, 2));
```

--

```
int add(int a, int b) {
  return 4;
}
```

---

# A trivial example : testing `add` function

```
assertEquals(4, add(2, 2));
assertEquals(5, add(6, -1));
```

--

```
int add(int a, int b) {
    if (a == 6 && b == -1) return 5;
    else return 4;
}
```

---

#TDD Rules 

You are not allowed to write :
1. Production code unless it is to make a failing unit test pass.
2. More of a unit test than is sufficient to fail; and compilation failures are failures.
3. **More production code than is sufficient to pass the one failing unit test.**

![](images/bob.png)

---
#EDFH

![:scale 40%](images/garfield.png)

--

... the legendary burned-out, always lazy and often malicious programmer called ...

The Enterprise Developper from Hell

---
# Rethinking the approach

![:scale 100%](images/rethinking.png)

---

#Using random numbers ...

```
@Test
void testAdd() {
    Random r = new Random();
    for (int i = 0; i < 100; i++) {
        int x = r.nextInt();
        int y = r.nextInt();
        int expected = x + y;
        int actual = add(x, y);
        assertEquals(expected, actual);
    }
}
```

---

#Using random numbers ...

```
@Test
void testAdd() {
    Random r = new Random();
    for (int i = 0; i < 100; i++) {
        int x = r.nextInt();
        int y = r.nextInt();
*       int expected = x + y;
        int actual = add(x, y);
        assertEquals(expected, actual);
    }
}
```

---

# Requirements for the `add` function ?

--

How does `add` differ from `substract` ?

--

The result should not depend on parameter order

```
@Test
void testAddCommutative() {
    Random r = new Random();
    for (int i = 0; i < 100; i++) {
        int x = r.nextInt();
        int y = r.nextInt();
        assertEquals(add(x, y), add(y, x));
    }
}
```

--

```
int add(int a, int b) {
    return a * b;
}
```

---

# What is the difference between add and multiply ?

Neutral element is 0.

```
@Test
void testAddNeutral0() {
    Random r = new Random();
    for (int i = 0; i < 100; i++) {
        int x = r.nextInt();
        assertEquals(x, add(x, 0));
    }
}
```

--

```
int add(int a, int b) { 
  return a - b; 
}
```

Fails because of previous test 'The result should not depend on parameter order'.

---

# Last property : associativity

```
@Test
void testAddAssociativity() {
    Random r = new Random();
    for (int i = 0; i < 100; i++) {
        int x = r.nextInt();
        int y = r.nextInt();
        int z = r.nextInt();
        assertEquals(add(x, add(y, z)), add(add(x, y), z));
    }
}
```



  </textarea>
    <script src="downloads/remark-latest.min.js"></script>
    <script>
        remark.macros.scale = function (percentage) {
          var url = this;
          return '<img src="' + url + '" style="width: ' + percentage + '" />';
        };

        var slideshow = remark.create({
          highlightStyle: 'idea',
          highlightLanguage: 'java',
          highlightLines: true
        }) ;
    </script>
</body>
</html>
